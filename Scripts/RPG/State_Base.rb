module RPG
	#==============================================================================
	# ■ State_Base
	#------------------------------------------------------------------------------	
	#	定义状态的基本特性。要添加新的状态需要实现新的状态类
	#	必须重新实现的函数：
	# 		setup; can_accumulate?; max_accumulate
	#	选择性实现的函数：	其他影响参数的函数
	#
	#==============================================================================
	class State_Base < State
		# 每一个state都知道自己的battler.
		attr_accessor		:battler
		# 每一个state都有一个timer. timer为0则移除,单位是帧
		attr_accessor		:timer
		# 状态考虑的顺序，从小打大
		attr_accessor 		:priority
		#--------------------------------------------------------------------------
		# ● 初始化
		#
		# 	每一种state都对应一个class
		#	具体的state里面某些值是可以不同的：
		# 		Monster可以有一个"无敌"state,id=1,增加防御1000
		# 		Player也可以有一个"无敌"state,id=2,增加防御100
		#--------------------------------------------------------------------------
		def initialize
			super
		end
		#--------------------------------------------------------------------------
		# ● 设置参数
		#	battler 		:	状态拥有者
		# 	priority		:	状态结算优先级 - 越小越优先 - 系统默认为128
		# 	timer 			:	状态持续时间 - 单位，秒
		#
		#--------------------------------------------------------------------------
		def setup(battler = nil, priority = 128, timer = 7200)
			@battler = battler
			@priority = priority
			@timer = (timer * Graphics.frame_rate * timer).ceil
		end
		#--------------------------------------------------------------------------
		# ● 定义该状态是否能够叠加
		#--------------------------------------------------------------------------
		def can_accumulate?
			return true
		end
		#--------------------------------------------------------------------------
		# ● 定义最大叠加次数
		#--------------------------------------------------------------------------
		def max_accumulate
			return 9999
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的maxhp
		#--------------------------------------------------------------------------
		def maxhp
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的maxhp
		#--------------------------------------------------------------------------
		def maxhp_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的maxmp
		#--------------------------------------------------------------------------
		def maxmp
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的maxmp
		#--------------------------------------------------------------------------
		def maxmp_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的atk
		#--------------------------------------------------------------------------
		def atk
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的atk
		#--------------------------------------------------------------------------
		def atk_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的def
		#--------------------------------------------------------------------------
		def def
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的def
		#--------------------------------------------------------------------------
		def def_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的strength
		#--------------------------------------------------------------------------
		def strength
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的strength
		#--------------------------------------------------------------------------
		def strength_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的celerity
		#--------------------------------------------------------------------------
		def celerity
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的celerity
		#--------------------------------------------------------------------------
		def celerity_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的wisdom
		#--------------------------------------------------------------------------
		def wisdom
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的wisdom
		#--------------------------------------------------------------------------
		def wisdom_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的wisdom
		#--------------------------------------------------------------------------
		def wisdom
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的wisdom
		#--------------------------------------------------------------------------
		def wisdom_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的destroy
		#--------------------------------------------------------------------------
		def destroy
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的destroy
		#--------------------------------------------------------------------------
		def destroy_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的mdestroy
		#--------------------------------------------------------------------------
		def mdestroy
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的mdestroy
		#--------------------------------------------------------------------------
		def mdestroy_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的atkspeed
		#--------------------------------------------------------------------------
		def atkspeed
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的atkspeed
		#--------------------------------------------------------------------------
		def atkspeed_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的eva
		#--------------------------------------------------------------------------
		def eva
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的eva
		#--------------------------------------------------------------------------
		def eva_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的hit
		#--------------------------------------------------------------------------
		def hit
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的hit
		#--------------------------------------------------------------------------
		def hit_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的bom
		#--------------------------------------------------------------------------
		def bom
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的bom
		#--------------------------------------------------------------------------
		def bom_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的bomatk
		#--------------------------------------------------------------------------
		def bomatk
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的bomatk
		#--------------------------------------------------------------------------
		def bomatk_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的hpcover
		#--------------------------------------------------------------------------
		def hpcover
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的hpcover
		#--------------------------------------------------------------------------
		def hpcover_rate
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从数值上加成battler的mpcover
		#--------------------------------------------------------------------------
		def mpcover
			return 0
		end
		#--------------------------------------------------------------------------
		# ● 该state从百分比上加成battler的mpcover
		#--------------------------------------------------------------------------
		def mpcover_rate
			return 0
		end
	end
	
	#==============================================================================
	# ■ Single_Frozen_State
	#------------------------------------------------------------------------------	
	#	例子。
	#	名字：Single_Frozen
	#	效果：攻击速度减慢20%, 不可叠加
	#	
	#==============================================================================
	class Single_Frozen_State < State_Base
		#--------------------------------------------------------------------------
		# ● 能否叠加
		#--------------------------------------------------------------------------
		def can_accumulate?
			return true
		end
		#--------------------------------------------------------------------------
		# ● 最大叠加数 - 两重
		#--------------------------------------------------------------------------
		def max_accumulate
			5
		end
		#--------------------------------------------------------------------------
		# ● 效果：速度减20%
		#--------------------------------------------------------------------------
		def atkspeed
			return -20
		end
	end
	
end